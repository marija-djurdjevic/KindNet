<div class="calendar-container">
  <div class="header-container">
    <div class="view-buttons">
      <button mat-flat-button mwlCalendarPreviousView
              [view]="view" [(viewDate)]="viewDate">
        <mat-icon>chevron_left</mat-icon> Prethodni
      </button>
      <button mat-flat-button mwlCalendarToday
              [(viewDate)]="viewDate">
        <mat-icon>refresh</mat-icon> Danas
      </button>
      <button mat-flat-button mwlCalendarNextView
              [view]="view" [(viewDate)]="viewDate">
        Sledeći <mat-icon>chevron_right</mat-icon>
      </button>
    </div>

    <div class="current-month-title">
      <!-- Korišćenje ispravnog calendarDate pipe-a -->
      <h3>{{ viewDate | calendarDate:(view + 'ViewTitle'):'sr-Latn' }}</h3>
    </div>
  </div>

  <div class="calendar-view-container">
    <mwl-calendar-month-view
      [viewDate]="viewDate"
      [events]="events"
      (dayClicked)="dayClicked($event)"
      [activeDayIsOpen]="activeDayIsOpen"
      [cellTemplate]="cellTemplate"
      [locale]="'sr-Latn'">
    </mwl-calendar-month-view>
    
    <ng-template #cellTemplate let-day="day">
      <div class="cal-cell-top">
        <span class="cal-day-number">{{ day.date | date:'d' }}</span>
      </div>
      <div class="event-titles-container">
        <div *ngFor="let event of day.events"
             class="event-title"
             [style.backgroundColor]="event.color.primary"
             [style.color]="'white'">
          {{ event.title }}
        </div>
      </div>
    </ng-template>
  </div>
</div>
